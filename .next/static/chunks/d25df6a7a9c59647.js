(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,67585,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"BailoutToCSR",{enumerable:!0,get:function(){return s}});let a=e.r(32061);function s({reason:e,children:t}){if("undefined"==typeof window)throw Object.defineProperty(new a.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},9885,(e,t,r)=>{"use strict";function a(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"encodeURIPath",{enumerable:!0,get:function(){return a}})},52157,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"PreloadChunks",{enumerable:!0,get:function(){return i}});let a=e.r(43476),s=e.r(74080),l=e.r(63599),d=e.r(9885),n=e.r(43369);function i({moduleIds:e}){if("undefined"!=typeof window)return null;let t=l.workAsyncStorage.getStore();if(void 0===t)return null;let r=[];if(t.reactLoadableManifest&&e){let a=t.reactLoadableManifest;for(let t of e){if(!a[t])continue;let e=a[t].files;r.push(...e)}}if(0===r.length)return null;let i=(0,n.getDeploymentIdQueryOrEmptyString)();return(0,a.jsx)(a.Fragment,{children:r.map(e=>{let r=`${t.assetPrefix}/_next/${(0,d.encodeURIPath)(e)}${i}`;return e.endsWith(".css")?(0,a.jsx)("link",{precedence:"dynamic",href:r,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,s.preload)(r,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},69093,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return o}});let a=e.r(43476),s=e.r(71645),l=e.r(67585),d=e.r(52157);function n(e){return{default:e&&"default"in e?e.default:e}}let i={loader:()=>Promise.resolve(n(()=>null)),loading:null,ssr:!0},o=function(e){let t={...i,...e},r=(0,s.lazy)(()=>t.loader().then(n)),o=t.loading;function c(e){let n=o?(0,a.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,i=!t.ssr||!!t.loading,c=i?s.Suspense:s.Fragment,x=t.ssr?(0,a.jsxs)(a.Fragment,{children:["undefined"==typeof window?(0,a.jsx)(d.PreloadChunks,{moduleIds:t.modules}):null,(0,a.jsx)(r,{...e})]}):(0,a.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(r,{...e})});return(0,a.jsx)(c,{...i?{fallback:n}:{},children:x})}return c.displayName="LoadableComponent",c}},70703,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return s}});let a=e.r(55682)._(e.r(69093));function s(e,t){let r={};"function"==typeof e&&(r.loader=e);let s={...r,...t};return(0,a.default)({...s,modules:s.loadableGenerated?.modules})}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},81694,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(70703),s=e.i(26732),l=e.i(74780),d=e.i(42554);let n=l.StyleSheet.create({page:{flexDirection:"column",backgroundColor:"#FFFFFF",padding:20,fontSize:10,fontFamily:"Helvetica"},tableContainer:{flexDirection:"column"},header:{flexDirection:"row",borderBottomWidth:1,borderColor:"#bff0fd",alignItems:"center",height:24,backgroundColor:"#F3F4F6",fontWeight:"bold"},row:{flexDirection:"row",borderBottomWidth:1,borderColor:"#bff0fd",alignItems:"center",height:24},rowEven:{backgroundColor:"#F9FAFB"},cellDate:{flexBasis:"10%",color:"#111827",fontSize:9,textAlign:"left"},cellType:{flexBasis:"10%",color:"#111827",fontSize:9,textAlign:"left"},cellAddress:{flexBasis:"25%",color:"#111827",fontSize:9,textAlign:"left"},cellCadastre:{flexBasis:"10%",color:"#111827",fontSize:9,textAlign:"left",fontFamily:"Courier"},cellSurfaceHab:{flexBasis:"8%",color:"#111827",fontSize:9,textAlign:"right"},cellSurfaceTer:{flexBasis:"8%",color:"#111827",fontSize:9,textAlign:"right"},cellPrice:{flexBasis:"10%",color:"#111827",fontSize:9,textAlign:"right",fontWeight:"bold"},cellPriceM2:{flexBasis:"10%",color:"#2563EB",fontSize:9,textAlign:"right"},cellDistance:{flexBasis:"9%",color:"#111827",fontSize:9,textAlign:"right"},headerCell:{color:"#374151",fontSize:9,textTransform:"uppercase",fontWeight:"bold"},headerCellLeft:{color:"#374151",fontSize:9,textTransform:"uppercase",fontWeight:"bold",textAlign:"left"},headerCellRight:{color:"#374151",fontSize:9,textTransform:"uppercase",fontWeight:"bold",textAlign:"right"},title:{fontSize:16,fontWeight:"bold",marginBottom:10,color:"#111827"},subtitle:{fontSize:10,color:"#6B7280",marginBottom:15}}),i=e=>e?new Intl.NumberFormat("fr-FR").format(e).replace(/[\u00A0\u202F\s]/g," "):"-",o=({transactions:e})=>(0,t.jsx)(d.Document,{children:(0,t.jsxs)(d.Page,{size:"A4",orientation:"landscape",style:n.page,children:[(0,t.jsx)(d.Text,{style:n.title,children:"Explorateur DVF - Liste des Transactions"}),(0,t.jsxs)(d.Text,{style:n.subtitle,children:[e.length," transaction",e.length>1?"s":""," affichÃ©e",e.length>1?"s":""]}),(0,t.jsxs)(d.View,{style:n.tableContainer,children:[(0,t.jsxs)(d.View,{style:n.header,children:[(0,t.jsx)(d.Text,{style:[n.cellDate,n.headerCellLeft],children:"Date"}),(0,t.jsx)(d.Text,{style:[n.cellType,n.headerCellLeft],children:"Type"}),(0,t.jsx)(d.Text,{style:[n.cellAddress,n.headerCellLeft],children:"Adresse"}),(0,t.jsx)(d.Text,{style:[n.cellCadastre,n.headerCellLeft],children:"Cadastre"}),(0,t.jsx)(d.Text,{style:[n.cellSurfaceHab,n.headerCellRight],children:"Surf. Hab."}),(0,t.jsx)(d.Text,{style:[n.cellSurfaceTer,n.headerCellRight],children:"Surf. Ter."}),(0,t.jsx)(d.Text,{style:[n.cellPrice,n.headerCellRight],children:"Prix"}),(0,t.jsx)(d.Text,{style:[n.cellPriceM2,n.headerCellRight],children:"Prix/mÂ²"}),(0,t.jsx)(d.Text,{style:[n.cellDistance,n.headerCellRight],children:"Dist."})]}),e.map((e,r)=>{var a;return(0,t.jsxs)(d.View,{style:[n.row,r%2==1&&n.rowEven],children:[(0,t.jsx)(d.Text,{style:n.cellDate,children:e.date}),(0,t.jsx)(d.Text,{style:n.cellType,children:e.type}),(0,t.jsx)(d.Text,{style:n.cellAddress,children:e.address}),(0,t.jsx)(d.Text,{style:n.cellCadastre,children:e.cadastre}),(0,t.jsxs)(d.Text,{style:n.cellSurfaceHab,children:[i(e.surface)," mÂ²"]}),(0,t.jsx)(d.Text,{style:n.cellSurfaceTer,children:e.terrain>0?`${i(e.terrain)} m\xb2`:"-"}),(0,t.jsx)(d.Text,{style:n.cellPrice,children:(a=e.price)?new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",maximumFractionDigits:0}).format(a).replace(/[\u00A0\u202F\s]/g," "):"-"}),(0,t.jsx)(d.Text,{style:n.cellPriceM2,children:((e,t)=>{if(!t||0===t)return"-";let r=Math.round(e/t);return`${i(r)} â‚¬/m\xb2`})(e.price,e.surface)}),(0,t.jsxs)(d.Text,{style:n.cellDistance,children:[i(e.distance)," m"]})]},e.id)})]})]})}),c=(0,a.default)(()=>e.A(57481).then(e=>e.PDFDownloadLink),{loadableGenerated:{modules:[96898]},ssr:!1,loading:()=>(0,t.jsx)("span",{className:"text-gray-500",children:"Chargement..."})});function x(){let{data:e}=(0,s.useSession)(),[a,l]=(0,r.useState)(""),[d,n]=(0,r.useState)([]),[i,x]=(0,r.useState)([]),[m,p]=(0,r.useState)([]),[u,h]=(0,r.useState)(!1),[g,y]=(0,r.useState)(null),[f,b]=(0,r.useState)(500),[j,k]=(0,r.useState)({key:null,direction:"asc"}),[v,N]=(0,r.useState)({Maison:!0,Appartement:!0,Local:!1,Terrain:!1}),[w,C]=(0,r.useState)(!1);(0,r.useEffect)(()=>{w?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[w]);let T=(0,r.useRef)(null),M=async e=>{let t="number"==typeof e?e:f;if(!a)return alert("Veuillez entrer une adresse.");h(!0),n([]);try{let e=g;if(!e){let t=await fetch(`https://api-adresse.data.gouv.fr/search/?q=${encodeURIComponent(a)}&limit=1`),r=await t.json();if(!r.features?.length)throw Error("Adresse introuvable");let s=r.features[0].geometry.coordinates;e={lon:s[0],lat:s[1]},y(e)}console.log(`ðŸ”Ž Recherche avec Rayon: ${t}m`);let r=await fetch(`/api/search?lat=${e.lat}&lng=${e.lon}&radius=${t}`),s=await r.json();if(s.error)throw Error(s.error);let l=(s.data||s).map(t=>{var r;return{id:t.id_mutation||Math.random().toString(),date:new Date(t.date_mutation).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}),dateRaw:new Date(t.date_mutation),type:(r=t.type_local)?r.includes("Maison")?"Maison":r.includes("Appartement")?"Appartement":r.split(",")[0].trim():null,address:`${t.adresse_numero||""} ${t.adresse_nom_voie||""}, ${t.nom_commune||""}`,cadastre:t.id_parcelle&&14===t.id_parcelle.length?`${t.id_parcelle.substring(8,10)} N\xb0${parseInt(t.id_parcelle.substring(10,14),10)}`:t.id_parcelle||"-",surface:t.surface_reelle_bati||0,terrain:t.surface_terrain||0,price:t.valeur_fonciere||0,distance:((e,t,r,a)=>{if(!e||!t||!r||!a)return 0;let s=e*Math.PI/180,l=r*Math.PI/180,d=(r-e)*Math.PI/180,n=(a-t)*Math.PI/180,i=Math.sin(d/2)*Math.sin(d/2)+Math.cos(s)*Math.cos(l)*Math.sin(n/2)*Math.sin(n/2);return Math.round(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371e3)})(e.lat,e.lon,t.latitude,t.longitude)}});x(l),p([])}catch(e){console.error(e),alert("Erreur: "+e.message)}finally{h(!1)}},S=i.filter(e=>{if(!e.type)return!1;let t=Object.keys(v).find(t=>e.type.includes(t));return!!t&&v[t]}),F=[...S].sort((e,t)=>{let r,a;if(!j.key)return 0;switch(j.key){case"date":r=e.dateRaw?.getTime()||0,a=t.dateRaw?.getTime()||0;break;case"type":r=e.type||"",a=t.type||"";break;case"address":r=e.address?.toLowerCase()||"",a=t.address?.toLowerCase()||"";break;case"surface":r=e.surface||0,a=t.surface||0;break;case"terrain":r=e.terrain||0,a=t.terrain||0;break;case"price":r=e.price||0,a=t.price||0;break;case"priceM2":r=e.surface>0?e.price/e.surface:0,a=t.surface>0?t.price/t.surface:0;break;case"distance":r=e.distance||0,a=t.distance||0;break;default:return 0}return"string"==typeof r?"asc"===j.direction?r.localeCompare(a):a.localeCompare(r):"asc"===j.direction?r-a:a-r}),P=e=>{j.key===e?k({key:e,direction:"asc"===j.direction?"desc":"asc"}):k({key:e,direction:"asc"})},R=e=>{let t=i.find(t=>t.id===e);t&&(x(t=>t.filter(t=>t.id!==e)),p(e=>[...e,t]))},A=S.reduce((e,t)=>{let r=t.type?.includes("Terrain")?t.terrain:t.surface;return e+(r>0?t.price/r:0)},0)/(S.length||1),D=S.reduce((e,t)=>e+parseInt(t.surface||0),0)/(S.length||1),_=()=>(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})});return(0,t.jsx)("div",{className:"bg-gray-50 dark:bg-slate-950 min-h-screen text-gray-800 dark:text-white font-sans px-2 sm:px-4 md:px-8 py-8",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsxs)("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-center text-slate-800 dark:text-white tracking-tight flex-1",children:[(0,t.jsxs)("svg",{className:"w-10 h-10 text-blue-600 mr-3 inline-block",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})]}),"CaZa DVF ",(0,t.jsx)("span",{className:"text-blue-600 text-lg align-top",children:"PRO"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[e?.user&&(0,t.jsxs)("div",{className:"hidden sm:flex flex-col items-end mr-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-slate-300",children:e.user.name||e.user.email}),(0,t.jsx)("span",{className:"text-xs text-gray-500 dark:text-slate-500",children:e.user.email})]}),e?.user&&(0,t.jsxs)("button",{onClick:()=>(0,s.signOut)({callbackUrl:"/login"}),className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 dark:bg-red-700 dark:hover:bg-red-800 rounded-lg transition-all duration-200 transform hover:scale-105 active:scale-95",title:"DÃ©connexion",children:[(0,t.jsx)("span",{className:"hidden sm:inline",children:"DÃ©connexion"}),(0,t.jsx)("svg",{className:"w-5 h-5 sm:hidden",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})]}),(0,t.jsx)("button",{onClick:()=>C(!w),className:"p-2 rounded-full bg-gray-200 dark:bg-slate-700 text-gray-800 dark:text-yellow-400 transition-all hover:scale-110",title:w?"Mode clair":"Mode sombre",children:w?(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}):(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})})})]})]}),(0,t.jsx)("div",{className:"bg-white dark:bg-slate-900 p-4 sm:p-6 rounded-xl shadow-sm border border-gray-200 dark:border-slate-800 mb-6 relative z-20",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-3 md:gap-4 relative",children:[(0,t.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,t.jsx)("input",{type:"text",value:a,onChange:e=>{let t=e.target.value;(l(t),T.current&&clearTimeout(T.current),t.length<3)?n([]):T.current=setTimeout(async()=>{try{let e=await fetch(`https://api-adresse.data.gouv.fr/search/?q=${encodeURIComponent(t)}&limit=5`),r=await e.json();n(r.features||[])}catch(e){console.error(e)}},300)},placeholder:"Entrez une adresse...",className:"w-full p-3 sm:p-4 border border-gray-300 dark:border-slate-700 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-base sm:text-lg bg-white dark:bg-slate-900 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-slate-500"}),d.length>0&&(0,t.jsx)("ul",{className:"absolute left-0 right-0 bg-white dark:bg-slate-900 border border-gray-200 dark:border-slate-800 rounded-b-lg shadow-xl mt-1 max-h-60 overflow-y-auto z-50",children:d.map((e,r)=>(0,t.jsx)("li",{onClick:()=>{l(e.properties.label),y({lon:e.geometry.coordinates[0],lat:e.geometry.coordinates[1]}),n([])},className:"px-4 py-2 hover:bg-gray-100 dark:hover:bg-slate-800 cursor-pointer border-b border-gray-200 dark:border-slate-800 text-gray-900 dark:text-white",children:e.properties.label},r))})]}),(0,t.jsx)("button",{onClick:M,className:"bg-blue-600 hover:bg-blue-700 text-white px-6 sm:px-8 py-3 sm:py-2 rounded-lg font-bold w-full md:w-auto",children:u?"...":"Voir"})]})}),i.length>0&&(0,t.jsxs)("div",{className:"animate-fade-in-down",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:[(0,t.jsxs)("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-lg shadow border-l-4 border-blue-500",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-slate-400",children:"Prix Moyen / mÂ²"}),(0,t.jsxs)("p",{className:"text-2xl font-bold dark:text-white",children:[Math.round(A)," â‚¬"]})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-lg shadow border-l-4 border-green-500",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-slate-400",children:"Biens affichÃ©s"}),(0,t.jsx)("p",{className:"text-2xl font-bold dark:text-white",children:S.length})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-lg shadow border-l-4 border-purple-500",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-slate-400",children:"Surface Moyenne"}),(0,t.jsxs)("p",{className:"text-2xl font-bold dark:text-white",children:[Math.round(D)," mÂ²"]})]})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-slate-900 p-4 rounded-lg shadow-sm border border-gray-200 dark:border-slate-800 mb-6 flex flex-col md:flex-row gap-4 items-center md:justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 sm:gap-6 items-center flex-wrap w-full md:w-auto",children:[(0,t.jsxs)("div",{className:"flex gap-3 items-center flex-wrap justify-center md:justify-start",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-700 dark:text-slate-300",children:"Filtres :"}),Object.keys(v).map(e=>(0,t.jsxs)("label",{className:"inline-flex items-center cursor-pointer",children:[(0,t.jsx)("input",{type:"checkbox",checked:v[e],onChange:t=>N({...v,[e]:t.target.checked}),className:"h-4 w-4 text-blue-600 rounded border-gray-300 dark:border-slate-700 focus:ring-blue-500"}),(0,t.jsx)("span",{className:"ml-2 text-sm text-gray-700 dark:text-slate-300",children:e})]},e))]}),(0,t.jsxs)("div",{className:"flex gap-2 items-center flex-wrap justify-center md:justify-start",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-700 dark:text-slate-300",children:"Rayon :"}),[50,100,500,1e3].map(e=>(0,t.jsx)("button",{onClick:()=>{b(e),g&&M(e)},className:`px-3 py-2 sm:py-1 rounded text-sm font-medium transition-all ${f===e?"bg-blue-600 text-white shadow-sm":"bg-gray-100 dark:bg-slate-800 text-gray-700 dark:text-slate-300 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:e<1e3?`${e}m`:"1km"},e))]})]}),F.length>0&&(0,t.jsx)(c,{document:(0,t.jsx)(o,{transactions:F}),fileName:`transactions-dvf-${new Date().toISOString().split("T")[0]}.pdf`,className:"bg-gray-700 hover:bg-gray-800 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 shadow-sm w-full md:w-auto justify-center",children:({loading:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"ðŸ“„"}),(0,t.jsx)("span",{children:e?"GÃ©nÃ©ration...":"Export PDF"})]})})]}),(0,t.jsxs)("div",{className:"hidden md:block bg-white dark:bg-slate-900 rounded-xl shadow-sm border border-gray-200 dark:border-slate-800 overflow-hidden mb-6",children:[(0,t.jsx)("div",{className:"overflow-x-auto shadow-md sm:rounded-lg",children:(0,t.jsxs)("table",{className:"w-full text-left",children:[(0,t.jsx)("thead",{className:"sticky top-0 z-10 backdrop-blur-md bg-white/90 dark:bg-slate-900/90 border-b border-gray-200 dark:border-slate-800",children:(0,t.jsxs)("tr",{children:[(0,t.jsxs)("th",{className:"px-3 md:px-4 py-3 md:py-4 font-bold text-gray-500 dark:text-slate-400 text-xs uppercase cursor-pointer hover:bg-gray-200 dark:hover:bg-slate-800 transition-colors",onClick:()=>P("date"),children:["Date ","date"===j.key&&("asc"===j.direction?"â†‘":"â†“")]}),(0,t.jsxs)("th",{className:"px-3 md:px-4 py-3 md:py-4 font-bold text-gray-500 dark:text-slate-400 text-xs uppercase cursor-pointer hover:bg-gray-200 dark:hover:bg-slate-800 transition-colors",onClick:()=>P("type"),children:["Type ","type"===j.key&&("asc"===j.direction?"â†‘":"â†“")]}),(0,t.jsxs)("th",{className:"px-3 md:px-4 py-3 md:py-4 font-bold text-gray-500 dark:text-slate-400 text-xs uppercase cursor-pointer hover:bg-gray-200 dark:hover:bg-slate-800 transition-colors",onClick:()=>P("address"),children:["Adresse ","address"===j.key&&("asc"===j.direction?"â†‘":"â†“")]}),(0,t.jsx)("th",{className:"px-3 md:px-4 py-3 md:py-4 font-bold text-gray-500 dark:text-slate-400 text-xs uppercase",children:"Cadastre"}),(0,t.jsxs)("th",{className:"px-3 md:px-4 py-3 md:py-4 font-bold text-gray-500 dark:text-slate-400 text-xs uppercase text-right cursor-pointer hover:bg-gray-200 dark:hover:bg-slate-800 transition-colors",onClick:()=>P("surface"),children:["Surf. Hab. ","surface"===j.key&&("asc"===j.direction?"â†‘":"â†“")]}),(0,t.jsxs)("th",{className:"px-3 md:px-4 py-3 md:py-4 font-bold text-gray-500 dark:text-slate-400 text-xs uppercase text-right cursor-pointer hover:bg-gray-200 dark:hover:bg-slate-800 transition-colors",onClick:()=>P("terrain"),children:["Surf. Ter. ","terrain"===j.key&&("asc"===j.direction?"â†‘":"â†“")]}),(0,t.jsxs)("th",{className:"px-3 md:px-4 py-3 md:py-4 font-bold text-gray-500 dark:text-slate-400 text-xs uppercase text-right cursor-pointer hover:bg-gray-200 dark:hover:bg-slate-800 transition-colors",onClick:()=>P("price"),children:["Prix ","price"===j.key&&("asc"===j.direction?"â†‘":"â†“")]}),(0,t.jsxs)("th",{className:"px-3 md:px-4 py-3 md:py-4 font-bold text-gray-500 dark:text-slate-400 text-xs uppercase text-right cursor-pointer hover:bg-gray-200 dark:hover:bg-slate-800 transition-colors",onClick:()=>P("priceM2"),children:["Prix/mÂ² ","priceM2"===j.key&&("asc"===j.direction?"â†‘":"â†“")]}),(0,t.jsxs)("th",{className:"px-3 md:px-4 py-3 md:py-4 font-bold text-gray-500 dark:text-slate-400 text-xs uppercase text-right cursor-pointer hover:bg-gray-200 dark:hover:bg-slate-800 transition-colors",onClick:()=>P("distance"),children:["Dist. ","distance"===j.key&&("asc"===j.direction?"â†‘":"â†“")]}),(0,t.jsx)("th",{className:"px-3 md:px-4 py-3 md:py-4 text-center font-bold text-gray-500 dark:text-slate-400 text-xs uppercase",children:"Action"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-800",children:F.map(e=>{let r,a,s;return(0,t.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800/50 even:bg-gray-50 dark:even:bg-slate-800/50 transition-colors",children:[(0,t.jsx)("td",{className:"px-3 md:px-4 py-3 md:py-4 text-sm text-gray-600 dark:text-slate-300",children:e.date}),(0,t.jsx)("td",{className:"px-3 md:px-4 py-3 md:py-4",children:(0,t.jsx)("span",{className:`px-2 py-1 rounded text-xs font-semibold border ${e.type?.includes("Maison")?"bg-emerald-50 text-emerald-700 border-emerald-200":e.type?.includes("Appartement")?"bg-blue-50 text-blue-700 border-blue-200":e.type?.includes("Local")?"bg-purple-50 text-purple-700 border-purple-200":e.type?.includes("Terrain")?"bg-amber-50 text-amber-700 border-amber-200":"bg-gray-50 text-gray-700 border-gray-200"}`,children:e.type||"-"})}),(0,t.jsx)("td",{className:"px-3 md:px-4 py-3 md:py-4 text-sm font-medium text-gray-900 dark:text-slate-300",children:e.address}),(0,t.jsx)("td",{className:"px-3 md:px-4 py-3 md:py-4 text-sm text-gray-600 dark:text-slate-300 font-mono",children:e.cadastre}),(0,t.jsxs)("td",{className:"px-3 md:px-4 py-3 md:py-4 text-sm text-right text-gray-600 dark:text-slate-300 font-mono",children:[e.surface," mÂ²"]}),(0,t.jsx)("td",{className:"px-3 md:px-4 py-3 md:py-4 text-sm text-right text-gray-600 dark:text-slate-300 font-mono",children:e.terrain>0?`${e.terrain} m\xb2`:"-"}),(0,t.jsx)("td",{className:"px-3 md:px-4 py-3 md:py-4 text-sm text-right font-bold text-gray-900 dark:text-slate-300 font-mono",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",maximumFractionDigits:0}).format(e.price)}),(0,t.jsx)("td",{className:"px-3 md:px-4 py-3 md:py-4 text-sm text-right text-blue-600 font-medium font-mono",children:(a=(r=e.type?.includes("Terrain"))?e.terrain:e.surface,0==(s=e.price&&a>0?e.price/a:0)?(0,t.jsx)("span",{className:"text-gray-400 dark:text-slate-500",children:"-"}):(0,t.jsxs)(t.Fragment,{children:[new Intl.NumberFormat("fr-FR",{maximumFractionDigits:0}).format(s)," â‚¬/mÂ²",(0,t.jsxs)("span",{className:"text-xs text-gray-400 dark:text-slate-500 block font-sans",children:["sur ",r?"terrain":"hab."]})]}))}),(0,t.jsxs)("td",{className:"px-3 md:px-4 py-3 md:py-4 text-sm text-right text-gray-500 dark:text-slate-400 font-mono",children:[e.distance," m"]}),(0,t.jsx)("td",{className:"px-3 md:px-4 py-3 md:py-4 text-center",children:(0,t.jsx)("button",{onClick:()=>R(e.id),className:"text-gray-400 hover:text-red-600 hover:bg-red-50 p-2 rounded transition-colors",title:"Supprimer",children:(0,t.jsx)(_,{})})})]},e.id)})})]})}),0===F.length&&(0,t.jsx)("div",{className:"p-8 text-center text-gray-500 dark:text-slate-400",children:"Aucun rÃ©sultat avec ces filtres."})]}),(0,t.jsx)("div",{className:"block md:hidden mb-6",children:0===F.length?(0,t.jsx)("div",{className:"p-8 text-center text-gray-500 dark:text-slate-400 bg-white dark:bg-slate-900 rounded-lg shadow-sm border border-gray-200 dark:border-slate-800",children:"Aucun rÃ©sultat avec ces filtres."}):(0,t.jsx)("div",{className:"grid grid-cols-1 gap-4",children:F.map(e=>{let r,a,s=e.type?.includes("Terrain")?e.terrain:e.surface;e.price&&s>0&&e.price;let l=e.type?.includes("Maison")?"text-emerald-700":e.type?.includes("Appartement")?"text-blue-700":e.type?.includes("Local")?"text-purple-700":e.type?.includes("Terrain")?"text-amber-700":"text-gray-700";return(0,t.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-lg shadow-sm border border-gray-200 dark:border-slate-800 p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsx)("span",{className:`font-bold text-sm ${l}`,children:e.type||"-"}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-gray-900 dark:text-slate-100",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",maximumFractionDigits:0}).format(e.price)}),(r=e.type?.includes("Terrain")?e.terrain:e.surface,0==(a=e.price&&r>0?e.price/r:0)?null:(0,t.jsxs)("div",{className:"text-xs text-gray-400 dark:text-slate-500 mt-1",children:[new Intl.NumberFormat("fr-FR",{maximumFractionDigits:0}).format(a)," â‚¬ / mÂ²"]}))]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-start text-sm text-gray-700 dark:text-slate-300 mb-3",children:[(0,t.jsx)("div",{className:"flex-1",children:e.address}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 dark:text-slate-400 ml-2 whitespace-nowrap",children:["ðŸ“ ",e.distance," m"]})]}),(0,t.jsxs)("div",{className:"flex gap-4 text-xs text-gray-600 dark:text-slate-400 mb-3",children:[(0,t.jsxs)("span",{children:["Hab: ",e.surface," mÂ²"]}),e.terrain>0&&(0,t.jsxs)("span",{children:["Ter: ",e.terrain," mÂ²"]})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center text-xs",children:[(0,t.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,t.jsx)("span",{className:"text-gray-600 dark:text-slate-400",children:e.date}),(0,t.jsx)("span",{className:"text-gray-400 dark:text-slate-500 font-mono",children:e.cadastre})]}),(0,t.jsx)("button",{onClick:()=>R(e.id),className:"text-gray-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 p-2 rounded transition-colors",title:"Supprimer",children:(0,t.jsx)(_,{})})]})]},e.id)})})}),m.length>0&&(0,t.jsxs)("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-sm border border-gray-200 dark:border-slate-800 overflow-hidden",children:[(0,t.jsx)("h2",{className:"p-4 bg-gray-100 dark:bg-slate-800 border-b border-gray-200 dark:border-slate-800 font-bold text-gray-700 dark:text-slate-300 tracking-tight",children:"ðŸ—‘ï¸ Corbeille / Ã‰lÃ©ments ignorÃ©s"}),(0,t.jsx)("div",{className:"overflow-x-auto shadow-md sm:rounded-lg",children:(0,t.jsxs)("table",{className:"w-full text-left",children:[(0,t.jsx)("thead",{className:"bg-gray-50 dark:bg-slate-800 border-b border-gray-200 dark:border-slate-800",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-3 md:px-4 py-3 md:py-4 font-bold text-gray-500 dark:text-slate-400 text-xs uppercase",children:"Date"}),(0,t.jsx)("th",{className:"px-3 md:px-4 py-3 md:py-4 font-bold text-gray-500 dark:text-slate-400 text-xs uppercase",children:"Type"}),(0,t.jsx)("th",{className:"px-3 md:px-4 py-3 md:py-4 font-bold text-gray-500 dark:text-slate-400 text-xs uppercase",children:"Adresse"}),(0,t.jsx)("th",{className:"px-3 md:px-4 py-3 md:py-4 font-bold text-gray-500 dark:text-slate-400 text-xs uppercase",children:"Cadastre"}),(0,t.jsx)("th",{className:"px-3 md:px-4 py-3 md:py-4 font-bold text-gray-500 dark:text-slate-400 text-xs uppercase text-right",children:"Surf. Hab."}),(0,t.jsx)("th",{className:"px-3 md:px-4 py-3 md:py-4 font-bold text-gray-500 dark:text-slate-400 text-xs uppercase text-right",children:"Surf. Ter."}),(0,t.jsx)("th",{className:"px-3 md:px-4 py-3 md:py-4 font-bold text-gray-500 dark:text-slate-400 text-xs uppercase text-right",children:"Prix"}),(0,t.jsx)("th",{className:"px-3 md:px-4 py-3 md:py-4 font-bold text-gray-500 dark:text-slate-400 text-xs uppercase text-right",children:"Prix/mÂ²"}),(0,t.jsx)("th",{className:"px-3 md:px-4 py-3 md:py-4 font-bold text-gray-500 dark:text-slate-400 text-xs uppercase text-right",children:"Dist."}),(0,t.jsx)("th",{className:"px-3 md:px-4 py-3 md:py-4 text-center font-bold text-gray-500 dark:text-slate-400 text-xs uppercase",children:"Action"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-100 dark:divide-slate-800",children:m.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-slate-800/50 opacity-75 transition-colors",children:[(0,t.jsx)("td",{className:"px-3 md:px-4 py-3 md:py-4 text-sm text-gray-600 dark:text-slate-300",children:e.date}),(0,t.jsx)("td",{className:"px-3 md:px-4 py-3 md:py-4",children:(0,t.jsx)("span",{className:`px-2 py-1 rounded text-xs font-semibold border ${e.type?.includes("Maison")?"bg-emerald-50 text-emerald-700 border-emerald-200":e.type?.includes("Appartement")?"bg-blue-50 text-blue-700 border-blue-200":e.type?.includes("Local")?"bg-purple-50 text-purple-700 border-purple-200":e.type?.includes("Terrain")?"bg-amber-50 text-amber-700 border-amber-200":"bg-gray-50 text-gray-700 border-gray-200"}`,children:e.type||"-"})}),(0,t.jsx)("td",{className:"px-3 md:px-4 py-3 md:py-4 text-sm font-medium text-gray-900 dark:text-slate-300",children:e.address}),(0,t.jsx)("td",{className:"px-3 md:px-4 py-3 md:py-4 text-sm text-gray-600 dark:text-slate-300 font-mono",children:e.cadastre}),(0,t.jsxs)("td",{className:"px-3 md:px-4 py-3 md:py-4 text-sm text-right text-gray-600 dark:text-slate-300 font-mono",children:[e.surface," mÂ²"]}),(0,t.jsx)("td",{className:"px-3 md:px-4 py-3 md:py-4 text-sm text-right text-gray-600 dark:text-slate-300 font-mono",children:e.terrain>0?`${e.terrain} m\xb2`:"-"}),(0,t.jsx)("td",{className:"px-3 md:px-4 py-3 md:py-4 text-sm text-right font-bold text-gray-900 dark:text-slate-300 font-mono",children:new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",maximumFractionDigits:0}).format(e.price)}),(0,t.jsx)("td",{className:"px-3 md:px-4 py-3 md:py-4 text-sm text-right text-blue-600 font-medium font-mono",children:e.surface>0?`${Math.round(e.price/e.surface).toLocaleString("fr-FR")} â‚¬/m\xb2`:"-"}),(0,t.jsxs)("td",{className:"px-3 md:px-4 py-3 md:py-4 text-sm text-right text-gray-500 dark:text-slate-400 font-mono",children:[e.distance," m"]}),(0,t.jsx)("td",{className:"px-3 md:px-4 py-3 md:py-4 text-center",children:(0,t.jsx)("button",{onClick:()=>{var t;let r;return t=e.id,void((r=m.find(e=>e.id===t))&&(p(e=>e.filter(e=>e.id!==t)),x(e=>[...e,r])))},className:"bg-green-500 hover:bg-green-600 text-white px-3 py-1 rounded text-xs font-medium transition-colors",children:"Restaurer"})})]},e.id))})]})})]})]})]})})}e.s(["default",()=>x],81694)},57481,e=>{e.v(t=>Promise.all(["static/chunks/8a8c4a6caa206869.js"].map(t=>e.l(t))).then(()=>t(96898)))}]);