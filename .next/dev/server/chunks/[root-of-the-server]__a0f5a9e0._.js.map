{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 48, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Administrator/projet-app-dvf/app/api/fix-db/route.js"],"sourcesContent":["import { Client } from 'pg';\r\nimport { NextResponse } from 'next/server';\r\n\r\nexport async function GET() {\r\n  // On utilise tes identifiants qui fonctionnent\r\n  const client = new Client({\r\n    connectionString: \"postgresql://postgres:Maison2026!@51.178.36.210:5432/postgres\",\r\n    ssl: false\r\n  });\r\n\r\n  try {\r\n    await client.connect();\r\n    \r\n    // Création des index pour la géolocalisation et les dates\r\n    await client.query(`\r\n      CREATE INDEX IF NOT EXISTS idx_transactions_geom ON transactions USING GIST (geom);\r\n      CREATE INDEX IF NOT EXISTS idx_transactions_date ON transactions (date_mutation);\r\n    `);\r\n\r\n    return NextResponse.json({ message: \"✅ SUCCÈS ! Les index sont créés. La recherche sera maintenant instantanée.\" });\r\n\r\n  } catch (error) {\r\n    return NextResponse.json({ error: error.message }, { status: 500 });\r\n  } finally {\r\n    await client.end();\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;;;;AAEO,eAAe;IACpB,+CAA+C;IAC/C,MAAM,SAAS,IAAI,uJAAM,CAAC;QACxB,kBAAkB;QAClB,KAAK;IACP;IAEA,IAAI;QACF,MAAM,OAAO,OAAO;QAEpB,0DAA0D;QAC1D,MAAM,OAAO,KAAK,CAAC,CAAC;;;IAGpB,CAAC;QAED,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAA6E;IAEnH,EAAE,OAAO,OAAO;QACd,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,MAAM,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IACnE,SAAU;QACR,MAAM,OAAO,GAAG;IAClB;AACF"}}]
}